name: Full-CI-CD-Pipeline
on: [push]

permissions: # Give the robot permission to "write" the website live
    contents: read
    pages: write
    id-token: write

jobs:
    test-and-build: #  The "CI" part
        runs-on: ubuntu-latest
        steps:
          - uses: actions/checkout@v4
          - name: Run Tests
            run: echo "Tests Passed! Ready to deploy."
        
    deploy-to-web: #  The "CD" part
      needs: test-and-build # Only run this if thie test job SUCCEEDS
      runs-on: ubuntu-latest
      environment: 
         name: github-pages
         url: ${{  steps.deployment.outputs.page_url  }}
      steps:
        -  uses: actions/checkout@v4
        -  uses: actions/upload-pages-artifact@v3
           with: 
             path: '.' #Upload the current folder
        -  name: Deploy to GitHub Pages
           id: deployment
           uses: actions/deploy-pages@v4   
